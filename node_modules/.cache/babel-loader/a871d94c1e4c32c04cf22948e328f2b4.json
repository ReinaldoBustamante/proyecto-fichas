{"ast":null,"code":"import _objectSpread from\"/home/reinaldobustamante/repositorios/info290/Proyecto-gestor-de-fichas-clinicas-frontend-/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/reinaldobustamante/repositorios/info290/Proyecto-gestor-de-fichas-clinicas-frontend-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Axios from\"axios\";import Swal from'sweetalert2';import Moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Formulario=function Formulario(props){var rut=props.rut,setcargaHistorial=props.setcargaHistorial,cargaHistorial=props.cargaHistorial;var _useState=useState({fecha:\"\",razon_ingreso:\"\",detalles:\"\",rut:\"\"}),_useState2=_slicedToArray(_useState,2),historial=_useState2[0],sethistorial=_useState2[1];var fecha=new Date();var añoActual=fecha.getFullYear();var hoy=fecha.getDate();var mesActual=fecha.getMonth()+1;var creacion_historial=new Date(añoActual+\"-\"+mesActual+\"-\"+hoy);var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),historiales=_useState4[0],sethistoriales=_useState4[1];useEffect(function(){Axios.get(\"https://api-rest-cfedent.herokuapp.com/historiales-clinicos/\".concat(rut,\"/\").concat(añoActual+\"-\"+mesActual+\"-\"+hoy,\"/\")).then(function(response){sethistoriales(response.data);});},[]);var Toast=Swal.mixin({toast:true,position:'top-end',showConfirmButton:false,timer:3000,timerProgressBar:true,didOpen:function didOpen(toast){toast.addEventListener('mouseenter',Swal.stopTimer);toast.addEventListener('mouseleave',Swal.resumeTimer);}});var handleOnChange=function handleOnChange(e){if(e.target.name===\"razon_ingreso\"){sethistorial(_objectSpread(_objectSpread({},historial),{},{razon_ingreso:e.target.value}));}if(e.target.name===\"detalles\"){sethistorial(_objectSpread(_objectSpread({},historial),{},{detalles:e.target.value}));}};var handleOnSubmit=function handleOnSubmit(e){e.preventDefault();{historiales[0]===undefined?Axios.post('https://api-rest-cfedent.herokuapp.com/historiales-clinicos',{fecha:creacion_historial,detalles:historial.detalles,razon_ingreso:historial.razon_ingreso,rut:rut}).then(function(response){if(response.status===200){setcargaHistorial(cargaHistorial+1);Toast.fire({icon:'success',title:'Signed in successfully'});sethistorial(_objectSpread(_objectSpread({},historial),{},{razon_ingreso:\"\",detalles:\"\"}));}}).catch(function(err){console.log(err);}):Toast.fire({icon:'error',title:'Ya existe un historial creado en la fecha actual'});}};return/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleOnSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",value:historial.razon_ingreso,onChange:handleOnChange,name:\"razon_ingreso\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"razon_ingreso\",children:\"Razon de ingreso\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",onChange:handleOnChange,name:\"detalles\",value:historial.detalles}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"detalles\",children:\"Detalles\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mt-3\",\"data-bs-dismiss\":\"modal\",children:\"Registrar\"})})]});};","map":{"version":3,"names":["React","useEffect","useState","Axios","Swal","Moment","Formulario","props","rut","setcargaHistorial","cargaHistorial","fecha","razon_ingreso","detalles","historial","sethistorial","Date","añoActual","getFullYear","hoy","getDate","mesActual","getMonth","creacion_historial","historiales","sethistoriales","get","then","response","data","Toast","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","handleOnChange","e","target","name","value","handleOnSubmit","preventDefault","undefined","post","status","fire","icon","title","catch","err","console","log"],"sources":["/home/reinaldobustamante/repositorios/info290/Proyecto-gestor-de-fichas-clinicas-frontend-/src/components/pacientes/historial/Formulario.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Axios from \"axios\"\nimport Swal from 'sweetalert2'\nimport Moment from \"moment\"\nexport const Formulario = (props) => {\n    const {rut, setcargaHistorial, cargaHistorial} = props\n    const [historial, sethistorial] = useState({\n        fecha: \"\",\n        razon_ingreso:\"\",\n        detalles: \"\",\n        rut:\"\"\n    })\n    \n    const fecha = new Date();\n    const añoActual = fecha.getFullYear();\n    const hoy = fecha.getDate();\n    const mesActual = fecha.getMonth() + 1; \n    const creacion_historial = new Date(añoActual+\"-\"+mesActual+\"-\"+hoy)\n    const [historiales, sethistoriales] = useState(\"\")\n\n    useEffect(() => {\n        Axios.get(`https://api-rest-cfedent.herokuapp.com/historiales-clinicos/${rut}/${añoActual+\"-\"+mesActual+\"-\"+hoy}/`).then( (response) =>{\n        sethistoriales(response.data)\n        })\n    \n    }, [])\n  \n    \n\n\n\n    const Toast = Swal.mixin({\n        toast: true,\n        position: 'top-end',\n        showConfirmButton: false,\n        timer: 3000,\n        timerProgressBar: true,\n        didOpen: (toast) => {\n          toast.addEventListener('mouseenter', Swal.stopTimer)\n          toast.addEventListener('mouseleave', Swal.resumeTimer)\n        }\n      })\n\n    const handleOnChange = (e) => {\n        if(e.target.name ===\"razon_ingreso\"){\n            sethistorial({\n                ...historial,\n                razon_ingreso: e.target.value\n            })\n        }\n        if(e.target.name ===\"detalles\"){\n            sethistorial({\n                ...historial,\n                detalles: e.target.value\n            })\n        }\n    }\n    \n    const handleOnSubmit = (e) => {\n        e.preventDefault()\n        {historiales[0] === undefined ?\n            Axios.post('https://api-rest-cfedent.herokuapp.com/historiales-clinicos',{\n                fecha: creacion_historial,\n                detalles: historial.detalles,\n                razon_ingreso: historial.razon_ingreso,\n                rut: rut\n                \n                \n                \n            }).then((response) => {\n                if(response.status === 200){\n                    setcargaHistorial(cargaHistorial +1)\n                    Toast.fire({\n                        icon: 'success',\n                        title: 'Signed in successfully'\n                    })\n                    sethistorial({\n                        ...historial,\n                        razon_ingreso: \"\",\n                        detalles: \"\"\n                    })\n                }\n            }).catch(err =>{\n                console.log(err)\n            }) \n    \n        :\n        Toast.fire({\n            icon: 'error',\n            title: 'Ya existe un historial creado en la fecha actual'\n        })\n        }\n       \n    }\n\n    return (\n        <form action=\"\" onSubmit = {handleOnSubmit}>\n            <div className=\"row\">\n                <div className=\"col\">\n                    <div class=\"form-floating\">\n                        <input type = \"text\" class=\"form-control\" value={historial.razon_ingreso} onChange={handleOnChange} name = \"razon_ingreso\"/>\n                        <label htmlFor= \"razon_ingreso\" >\n                            Razon de ingreso\n                        </label>\n                    </div>\n                </div>\n\n                <div className=\"col\">\n                    <div class=\"form-floating\">\n                        <input type = \"text\" class=\"form-control\" onChange={handleOnChange} name = \"detalles\" value={historial.detalles}/>\n                        <label htmlFor= \"detalles\" >\n                            Detalles\n                        </label>\n                    </div>\n                </div>                \n            </div>\n            <div className=\"row\">\n                <button className=\"btn btn-primary mt-3\" data-bs-dismiss=\"modal\" >Registrar</button>\n            </div>\n            \n        </form>\n        \n   )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}