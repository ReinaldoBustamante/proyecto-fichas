{"ast":null,"code":"import _slicedToArray from\"/home/reinaldobustamante/repositorios/info290/Proyecto-gestor-de-fichas-clinicas-frontend-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import Axios from'axios';import{Redirect}from'react-router-dom';import Swal from'sweetalert2';import{Formulario}from'../components/login/Formulario';import'../../src/index.css';import{jsx as _jsx}from\"react/jsx-runtime\";export var Login=function Login(props){var loginStatus=props.loginStatus,setloginStatus=props.setloginStatus,setusuario=props.setusuario;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setusername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setpassword=_useState4[1];var Toast=Swal.mixin({toast:true,position:'top-end',showConfirmButton:false,timer:3000,timerProgressBar:true,didOpen:function didOpen(toast){toast.addEventListener('mouseenter',Swal.stopTimer);toast.addEventListener('mouseleave',Swal.resumeTimer);}});var login=function login(e){e.preventDefault();Axios.post('https://api-rest-cfedent.herokuapp.com/login',{username:username,password:password}).then(function(response){console.log(response);if(response.data.Message){Toast.fire({icon:'error',title:'Credenciales Incorrectas'});setloginStatus(false);}else{setusuario({nombre:response.data[0].nombre,rut:response.data[0].rut,correo:response.data[0].correo,telefono:response.data[0].telefono,rol:response.data[0].rol,username:response.data[0].username});Toast.fire({icon:'success',title:'Ha iniciado sesion correctamente'});setloginStatus(true);}});};if(loginStatus){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid fondo \",children:/*#__PURE__*/_jsx(\"div\",{className:\"row \",children:/*#__PURE__*/_jsx(\"div\",{className:\"col body\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:login,children:/*#__PURE__*/_jsx(Formulario,{setusername:setusername,setpassword:setpassword})})})})});};","map":{"version":3,"names":["React","useState","Axios","Redirect","Swal","Formulario","Login","props","loginStatus","setloginStatus","setusuario","username","setusername","password","setpassword","Toast","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","login","e","preventDefault","post","then","response","console","log","data","Message","fire","icon","title","nombre","rut","correo","telefono","rol"],"sources":["/home/reinaldobustamante/repositorios/info290/Proyecto-gestor-de-fichas-clinicas-frontend-/src/pages/Login.js"],"sourcesContent":["import React, { useState } from 'react'\nimport Axios from 'axios'\nimport {Redirect} from 'react-router-dom'\nimport Swal from 'sweetalert2'\nimport { Formulario } from '../components/login/Formulario'\nimport '../../src/index.css'\n\n\nexport const Login = (props) => {\n\n   \n    const {loginStatus, setloginStatus, setusuario} = props\n    const [username, setusername] = useState('')\n    const [password, setpassword] = useState('')\n   \n     \n    const Toast = Swal.mixin({\n        toast: true,\n        position: 'top-end',\n        showConfirmButton: false,\n        timer: 3000,\n        timerProgressBar: true,\n        didOpen: (toast) => {\n        toast.addEventListener('mouseenter', Swal.stopTimer)\n        toast.addEventListener('mouseleave', Swal.resumeTimer)\n        }\n    })\n    \n    const login = (e) => {\n        e.preventDefault()\n        Axios.post('https://api-rest-cfedent.herokuapp.com/login', {\n            username: username,\n            password: password\n        }).then((response)=>{\n            console.log(response)\n            if (response.data.Message){\n                Toast.fire({\n                    icon: 'error',\n                    title: 'Credenciales Incorrectas'\n                })\n                setloginStatus(false)\n                \n            } else {\n                setusuario({\n                    nombre: response.data[0].nombre,\n                    rut: response.data[0].rut,\n                    correo: response.data[0].correo,\n                    telefono: response.data[0].telefono,\n                    rol: response.data[0].rol,\n                    username: response.data[0].username\n                })\n                Toast.fire({\n                    icon: 'success',\n                    title: 'Ha iniciado sesion correctamente'\n                })\n             \n                setloginStatus(true)\n            }\n        })  \n    }\n    if(loginStatus){\n        return <Redirect to='/' />\n    }\n\n    return (\n        <div className='container-fluid fondo '>\n            <div className='row '>\n                <div className='col body'>\n                   <form onSubmit={ login }>\n                       <Formulario     \n                        setusername={setusername}\n                        setpassword={setpassword}\n                       />\n                       \n                   </form>\n                </div>\n            </div>\n            \n        </div>\n    )\n}\n"],"mappings":"gLAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,MAAOC,KAAP,KAAiB,aAAjB,CACA,OAASC,UAAT,KAA2B,gCAA3B,CACA,MAAO,qBAAP,C,2CAGA,MAAO,IAAMC,MAAK,CAAG,QAARA,MAAQ,CAACC,KAAD,CAAW,CAG5B,GAAOC,YAAP,CAAkDD,KAAlD,CAAOC,WAAP,CAAoBC,cAApB,CAAkDF,KAAlD,CAAoBE,cAApB,CAAoCC,UAApC,CAAkDH,KAAlD,CAAoCG,UAApC,CACA,cAAgCT,QAAQ,CAAC,EAAD,CAAxC,wCAAOU,QAAP,eAAiBC,WAAjB,eACA,eAAgCX,QAAQ,CAAC,EAAD,CAAxC,yCAAOY,QAAP,eAAiBC,WAAjB,eAGA,GAAMC,MAAK,CAAGX,IAAI,CAACY,KAAL,CAAW,CACrBC,KAAK,CAAE,IADc,CAErBC,QAAQ,CAAE,SAFW,CAGrBC,iBAAiB,CAAE,KAHE,CAIrBC,KAAK,CAAE,IAJc,CAKrBC,gBAAgB,CAAE,IALG,CAMrBC,OAAO,CAAE,iBAACL,KAAD,CAAW,CACpBA,KAAK,CAACM,gBAAN,CAAuB,YAAvB,CAAqCnB,IAAI,CAACoB,SAA1C,EACAP,KAAK,CAACM,gBAAN,CAAuB,YAAvB,CAAqCnB,IAAI,CAACqB,WAA1C,EACC,CAToB,CAAX,CAAd,CAYA,GAAMC,MAAK,CAAG,QAARA,MAAQ,CAACC,CAAD,CAAO,CACjBA,CAAC,CAACC,cAAF,GACA1B,KAAK,CAAC2B,IAAN,CAAW,8CAAX,CAA2D,CACvDlB,QAAQ,CAAEA,QAD6C,CAEvDE,QAAQ,CAAEA,QAF6C,CAA3D,EAGGiB,IAHH,CAGQ,SAACC,QAAD,CAAY,CAChBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACA,GAAIA,QAAQ,CAACG,IAAT,CAAcC,OAAlB,CAA0B,CACtBpB,KAAK,CAACqB,IAAN,CAAW,CACPC,IAAI,CAAE,OADC,CAEPC,KAAK,CAAE,0BAFA,CAAX,EAIA7B,cAAc,CAAC,KAAD,CAAd,CAEH,CAPD,IAOO,CACHC,UAAU,CAAC,CACP6B,MAAM,CAAER,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBK,MADlB,CAEPC,GAAG,CAAET,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBM,GAFf,CAGPC,MAAM,CAAEV,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBO,MAHlB,CAIPC,QAAQ,CAAEX,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBQ,QAJpB,CAKPC,GAAG,CAAEZ,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBS,GALf,CAMPhC,QAAQ,CAAEoB,QAAQ,CAACG,IAAT,CAAc,CAAd,EAAiBvB,QANpB,CAAD,CAAV,CAQAI,KAAK,CAACqB,IAAN,CAAW,CACPC,IAAI,CAAE,SADC,CAEPC,KAAK,CAAE,kCAFA,CAAX,EAKA7B,cAAc,CAAC,IAAD,CAAd,CACH,CACJ,CA5BD,EA6BH,CA/BD,CAgCA,GAAGD,WAAH,CAAe,CACX,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAED,mBACI,YAAK,SAAS,CAAC,wBAAf,uBACI,YAAK,SAAS,CAAC,MAAf,uBACI,YAAK,SAAS,CAAC,UAAf,uBACG,aAAM,QAAQ,CAAGkB,KAAjB,uBACI,KAAC,UAAD,EACC,WAAW,CAAEd,WADd,CAEC,WAAW,CAAEE,WAFd,EADJ,EADH,EADJ,EADJ,EADJ,CAgBH,CAxEM"},"metadata":{},"sourceType":"module"}