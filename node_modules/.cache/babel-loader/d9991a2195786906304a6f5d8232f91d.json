{"ast":null,"code":"import _slicedToArray from\"/home/reinaldobustamante/repositorios/info290/Proyecto-gestor-de-fichas-clinicas-frontend-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Axios from\"axios\";import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Tabla=function Tabla(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),usuarios=_useState2[0],setUsuarios=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),carga=_useState4[0],setcarga=_useState4[1];var Toast=Swal.mixin({toast:true,position:'top-end',showConfirmButton:false,timer:3000,timerProgressBar:true,didOpen:function didOpen(toast){toast.addEventListener('mouseenter',Swal.stopTimer);toast.addEventListener('mouseleave',Swal.resumeTimer);}});useEffect(function(){Axios.get('https://api-rest-cfedent.herokuapp.com/usuarios').then(function(response){setUsuarios(response.data);});console.log(\"montado\");},[carga]);var handleOnClick=function handleOnClick(e){if(e.target.name===\"administrador\"||e.target.name===\"Administrador\"){Toast.fire({icon:'error',title:'No se puede eliminar un perfil administrador'});}else if(e.target.name===\"odontologo\"){Swal.fire({title:'Are you sure?',text:\"You won't be able to revert this!\",icon:'warning',showCancelButton:true,confirmButtonColor:'#3085d6',cancelButtonColor:'#d33',confirmButtonText:'Yes, delete it!'}).then(function(result){if(result.isConfirmed){Axios.delete(\"https://api-rest-cfedent.herokuapp.com/odontologos/\".concat(e.target.value)).then(function(res){if(res.status===200){Axios.delete(\"https://api-rest-cfedent.herokuapp.com/usuarios/\".concat(e.target.value)).then(function(res){if(res.status===200){Toast.fire({icon:'success',title:'Signed in successfully'});setcarga(carga+1);}});}});}});}else if(e.target.name===\"tons\"){Swal.fire({title:'Are you sure?',text:\"You won't be able to revert this!\",icon:'warning',showCancelButton:true,confirmButtonColor:'#3085d6',cancelButtonColor:'#d33',confirmButtonText:'Yes, delete it!'}).then(function(result){if(result.isConfirmed){Axios.delete(\"https://api-rest-cfedent.herokuapp.com/tons/\".concat(e.target.value)).then(function(res){if(res.status===200){Axios.delete(\"https://api-rest-cfedent.herokuapp.com/usuarios/\".concat(e.target.value)).then(function(res){if(res.status===200){Toast.fire({icon:'success',title:'Signed in successfully'});setcarga(carga+1);}});}});}});}};return/*#__PURE__*/_jsx(\"div\",{className:\"mt-5\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"cinereousTable \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Usuario\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Rut\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Correo\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Rol\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:usuarios.map(function(usuario,i){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"fuente-2\",children:usuario.username}),/*#__PURE__*/_jsx(\"td\",{className:\"fuente-2\",children:usuario.nombre}),/*#__PURE__*/_jsx(\"td\",{className:\"fuente-2\",children:usuario.rut}),/*#__PURE__*/_jsx(\"td\",{className:\"fuente-2\",children:usuario.correo}),/*#__PURE__*/_jsx(\"td\",{className:\"fuente-2\",children:usuario.rol}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",name:usuario.rol,value:usuario.rut,onClick:handleOnClick,children:\"Eliminar\"})})]},i)});})})]})});};","map":{"version":3,"names":["React","useEffect","useState","Axios","Swal","Tabla","usuarios","setUsuarios","carga","setcarga","Toast","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","get","then","response","data","console","log","handleOnClick","e","target","name","fire","icon","title","text","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","isConfirmed","delete","value","res","status","map","usuario","i","username","nombre","rut","correo","rol"],"sources":["/home/reinaldobustamante/repositorios/info290/Proyecto-gestor-de-fichas-clinicas-frontend-/src/components/registrosUsuarios/Tabla.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Axios from \"axios\"\nimport Swal from 'sweetalert2'\nexport const Tabla = () => {\n    \n    const [usuarios, setUsuarios] = useState([])\n    const [carga, setcarga] = useState(0)\n    \n\n    const Toast = Swal.mixin({\n        toast: true,\n        position: 'top-end',\n        showConfirmButton: false,\n        timer: 3000,\n        timerProgressBar: true,\n        didOpen: (toast) => {\n        toast.addEventListener('mouseenter', Swal.stopTimer)\n        toast.addEventListener('mouseleave', Swal.resumeTimer)\n        }\n    })\n\n    useEffect(() => {\n        Axios.get('https://api-rest-cfedent.herokuapp.com/usuarios').then( (response) =>{\n            setUsuarios(response.data)\n        })\n        console.log(\"montado\")\n    }, [carga])\n\n    const handleOnClick = (e) => {\n        if(e.target.name === \"administrador\" || e.target.name === \"Administrador\"){\n            Toast.fire({\n                icon: 'error',\n                title: 'No se puede eliminar un perfil administrador'\n            })\n        }\n        else if(e.target.name ===\"odontologo\"){\n            Swal.fire({\n                title: 'Are you sure?',\n                text: \"You won't be able to revert this!\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#3085d6',\n                cancelButtonColor: '#d33',\n                confirmButtonText: 'Yes, delete it!'\n            }).then((result) => {\n                if (result.isConfirmed) {\n                    Axios.delete(`https://api-rest-cfedent.herokuapp.com/odontologos/${e.target.value}`)\n                    .then(res => {\n                        if(res.status === 200){\n                            Axios.delete(`https://api-rest-cfedent.herokuapp.com/usuarios/${e.target.value}`)\n                            .then(res => {\n                                if(res.status === 200){\n                                    Toast.fire({\n                                        icon: 'success',\n                                        title: 'Signed in successfully'\n                                    })\n                                    setcarga(carga+1)\n                                }\n                            })\n                        }\n                    })\n                }\n            })\n        }\n        else if(e.target.name===\"tons\"){\n            Swal.fire({\n                title: 'Are you sure?',\n                text: \"You won't be able to revert this!\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#3085d6',\n                cancelButtonColor: '#d33',\n                confirmButtonText: 'Yes, delete it!'\n            }).then((result) => {\n                if (result.isConfirmed) {\n                    Axios.delete(`https://api-rest-cfedent.herokuapp.com/tons/${e.target.value}`)\n                    .then(res => {\n                        if(res.status === 200){\n                            Axios.delete(`https://api-rest-cfedent.herokuapp.com/usuarios/${e.target.value}`)\n                            .then(res => {\n                                if(res.status === 200){\n                                    Toast.fire({\n                                        icon: 'success',\n                                        title: 'Signed in successfully'\n                                    })\n                                    setcarga(carga+1)\n                                }\n                            })\n                        }\n                    })\n                }\n            })\n        }\n\n    \n    }\n\n    return (\n        <div className= \"mt-5\">\n            <table className=\"cinereousTable \">\n                <thead>\n                    <tr>\n                    <th scope=\"col\" >Usuario</th>\n                    <th scope=\"col\">Nombre</th>\n                    <th scope=\"col\">Rut</th>\n                    <th scope=\"col\">Correo</th>\n                    <th scope=\"col\">Rol</th>\n                    <th scope=\"col\"></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {usuarios.map( (usuario, i) => {\n                        return (\n                        <>\n                            <tr key = {i}>\n                                <td className=\"fuente-2\">{usuario.username}</td>\n                                <td className=\"fuente-2\">{usuario.nombre}</td>\n                                <td className=\"fuente-2\">{usuario.rut}</td>\n                                <td className=\"fuente-2\">{usuario.correo}</td>\n                                <td className=\"fuente-2\">{usuario.rol}</td>\n                                <td ><button type=\"button\" className=\"btn btn-danger\" name ={usuario.rol} value={usuario.rut} onClick={handleOnClick} >Eliminar</button></td>\n                            </tr>\n                            \n                        </>\n                        )\n                        \n                    })}\n                   \n                </tbody>\n            </table>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}